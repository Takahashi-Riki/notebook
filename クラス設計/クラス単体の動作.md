# 確認すべきこと

## クラス

- 下記を構成要素としているか？
  - インスタンス変数
  - インスタンス変数を不正状態から防御し、正常に動作するメソッド

## インスタンス変数

- コンストラクタで確実に正常値を設定しているか？
- 不変になっているか？
- インスタンス変数/メソッド引数/ローカル変数を不変にする。

## メソッド

- 計算ロジックをデータ保持側に寄せているか？
- インスタンスを変更したい場合は、新しいインスタンスを作成しているか？
- プリミティブ側ではなく独自の型を利用しているか？（値の渡し間違いを型で防止する意図）
- 現実の営みとしてあり得るメソッドが定義されているか？

# サンプルコード

```ruby
class Money
  # インスタンス変数を不変にする。
  attr_reader :amount, :currency

  def initialize(amount, currency)
    # コンストラクタで確実に正常値を設定する。
    raise ArgumentError.new("金額が0以上でありません") if amount < 0
    raise ArgumentError.new("通貨を指定してください") if currency.nil? || currency.empty?
    @amount = amount
    @currency = currency
  end

  # 計算ロジックをデータ保持側に寄せる。
  def add(other)
    # 値の渡し間違いを型で防止する。
    raise TypeError.new("引数がお金ではありません") unless other.instance_of?(Money)
    raise ArgumentError.new("通貨単位が異なります") unless currency == other.currency
    added_amount = amount + other.amount
    # 変更したい場合は新しいインスタンスを作成する。
    Money.new(added_amount, currency)
  end
end

savings   = Money.new(10000, "円")
allowance = Money.new( 1000, "円")
new_savings = savings.add(allowance)

puts new_savings
# => #<Money:0x00007f9733823468>

puts new_savings.amount
# => 11000
```
