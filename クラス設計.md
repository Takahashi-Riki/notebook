# クラス

- 下記を構成要素としていればOK。
  - インスタンス変数
  - インスタンス変数を不正状態から防御し、正常に動作するメソッド

# インスタンス変数

- コンストラクタで確実に正常値を設定していればOK。
- 不変になっていればOK。

# メソッド

## what -何をやるか-

- 現実の営みとしてあり得るメソッドが定義されていればOK。

## where -どこでやるか-

### どのクラスに定義するか？

- ロジックが定義されているのはデータ保持側になっていればOK。

### クラスのどこに定義するか？

- クラスメソッドを利用していて、下記に当てはまったらNG。
  - データとロジックの分離が発生してしまっている。
  - インスタンスメソッドに変更可能そう。
- 凝集度に無関係なものをクラスメソッドが良いOK。

## how -どんなロジックにするか-

### I/F

- インスタンスを変更したい場合に、新しいインスタンスを作成していればOK。
- プリミティブ側ではなく独自の型を利用していればOK。（値の渡し間違いを型で防止する意図）

### 内部ロジック

- 再代入/破壊的代入を避けていればOK。
- 可変インスタンスを使い回していなければOK。
  - パフォーマンスに影響を与える場合は可変にしてもOK。
  - 局所的にしか利用しないことが明らかなローカル変数は可変にしてもOK。
- 特別な理由を除いて、副作用を防げていればOK。 ※下記を満たせていれば防げるはず
  - データ(=状態)を引数で受け取る
  - 状態を変更しない
  - 値は関数の戻り値として返す
- ファイルやDBの読み書きが局所化されていればOK。
